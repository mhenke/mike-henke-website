<!-- Shared head section for all layouts -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

{# SEO & Social Meta Tags #}
<title>{{ title if title else 'Mike Henke | Coder. Engineer. Professional.' }}</title>
<meta name="description" content="{{ description or 'Mike Henke - Full-stack web and mobile developer with 15+ years of experience. Specializing in JavaScript, Python, React, and modern web technologies.' }}">
<meta name="author" content="Mike Henke">
<meta name="robots" content="index, follow">

{# PERFORMANCE: Open Graph only on blog/article pages #}
{% if title == 'Blog' or layout == 'layouts/post.njk' %}
<meta property="og:type" content="article">
<meta property="og:title" content="{{ title }}">
<meta property="og:description" content="{{ description or 'Technical blog about web development by Mike Henke.' }}">
<meta property="og:url" content="{{ page.url | absoluteUrl(site.url) }}">
<meta property="og:site_name" content="Mike Henke">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="{{ title }}">
<meta name="twitter:description" content="{{ description or 'Technical blog about web development by Mike Henke.' }}">
{% endif %}

<!-- PERFORMANCE: DNS prefetch for faster font loading -->
<link rel="dns-prefetch" href="https://fonts.googleapis.com">
<link rel="dns-prefetch" href="https://fonts.gstatic.com">
<link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">

<!-- Preconnect to external domains -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<!-- PERFORMANCE: Critical font loading only -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&amp;display=swap" rel="stylesheet">

<!-- PERFORMANCE: Load Font Awesome on all pages for navigation icons -->
<link rel="stylesheet" 
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" 
      crossorigin="anonymous">

<!-- PERFORMANCE: Load syntax highlighting only on blog pages -->
{% if layout == 'layouts/post.njk' or (page.inputPath and page.inputPath.includes('output/posts/')) %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" 
      rel="stylesheet" crossorigin="anonymous">
{% endif %}

<!-- Critical CSS first -->
<link rel="stylesheet" href="{{ '/styles.css' | url }}">

<!-- PERFORMANCE: Load search CSS only on search page -->
{% if page.url.includes('/search/') %}
<link href="{{ '/pagefind/pagefind-ui.css' | url }}" rel="stylesheet">
{% endif %}

<!-- Environment indicator (only in development) -->
{% if site.environment == 'development' %}
<style>
  body::before {
    content: 'DEVELOPMENT - {{ site.environment | upper }}';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    background: #ff6b35;
    color: white;
    text-align: center;
    padding: 5px;
    font-size: 12px;
    font-weight: bold;
    z-index: 10000;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
  }
  
  body {
    padding-top: 30px;
  }
</style>
{% endif %}

<!-- Favicon -->
<link rel="icon" href="{{ '/favicon.ico' | url }}">

{# PERFORMANCE: Minimal JSON-LD only where needed #}
{% if title == 'Blog' or layout == 'layouts/post.njk' %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Blog",
  "name": "Mike Henke's Blog",
  "url": "{{ page.url | absoluteUrl(site.url) }}",
  "author": {"@type": "Person", "name": "Mike Henke"}
}
</script>
{% endif %}
